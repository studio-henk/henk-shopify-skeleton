{% comment %}
  Usage:
    {% render 'henk-snippet-money', amount: current_variant.price %}
{% endcomment %}

{% assign euros = amount | divided_by: 100 %}
{% assign cents = amount | modulo: 100 %}

{% comment %} {% if cents > 0 %} {% endcomment %}
{% comment %}   € {{ euros }},{{ cents | prepend: '0' }} {% endcomment %}
{% comment %} {% else %} {% endcomment %}
{% comment %}   € {{ euros }} {% endcomment %}
{% comment %} {% endif %} {% endcomment %}

{%- comment -%}
  Convert euros to string and reverse for grouping
{%- endcomment -%}
{% assign euros_str = euros | append: '' %}
{% assign reversed = euros_str | split: '' | reverse %}
{% assign grouped = '' %}

{% for i in (0..reversed.size) %}
  {% if i > 0 %}
    {% assign mod = i | modulo: 3 %}
    {% if mod == 0 %}
      {% assign grouped = grouped | append: '.' %}
    {% endif %}
  {% endif %}
  {% assign grouped = grouped | append: reversed[i] %}
{% endfor %}

{% assign formatted_euros = grouped | split: '' | reverse | join: '' %}

{%- comment -%}
  Render final price: include cents only if > 0
{%- endcomment -%}
{% if cents > 0 %}
  {% assign cents_str = cents | prepend: '0' | slice: -2, 2 %}
  € {{ formatted_euros }},{{ cents_str }}
{% else %}
  € {{ formatted_euros }}
{% endif %}
