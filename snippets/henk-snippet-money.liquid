{% assign euros = amount | divided_by: 100 %}
{% assign cents = amount | modulo: 100 %}

{% assign euros_str = euros | append: '' %}
{% assign formatted_euros = '' %}

{% assign len = euros_str | size %}
{% assign i = 0 %}

{% for c in euros_str %}
  {% assign pos_from_right = len | minus: i | minus: 1 %}
  {% comment %} {% assign mod3 = pos_from_right | modulo: 3 %} {% endcomment %}
  {% assign mod3 = (i | plus: 1) | modulo: 3 %}

  {% assign formatted_euros = formatted_euros | append: c %}

  {% if mod3 == 0 and pos_from_right != 0 %}
    {% assign formatted_euros = formatted_euros | append: '.' %}
  {% endif %}

  {% assign i = i | plus: 1 %}
{% endfor %}

{% if cents > 0 %}
  €&nbsp;{{ formatted_euros }},{{ cents | prepend: '0' }}
{% else %}
  €&nbsp;{{ formatted_euros }}
{% endif %}
