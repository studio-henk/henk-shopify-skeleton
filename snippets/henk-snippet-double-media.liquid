{% comment %}
  Snippet: henk-double-media-block
  Supports image or video for each slot.
  Avoids wrapping video in <a> since henk-video handles links internally.
{% endcomment %}

{% assign p = props | default: section.settings %}

<div class="henk-double-media-block{% if p.reverse_layout %} henk-double-media-block--reverse{% endif %}">
  <div class="henk-double-media-block__inner">
    <div class="henk-double-media-block__grid">
      <!-- LARGE MEDIA -->
      <div class="henk-double-media-block__grid-item">
        {% if p.large_media_type == 'video' %}
          {% if p.large_video %}
            {% render 'henk-video',
              src: p.large_video,
              autoplay: true,
              loop: true,
              cover: true,
              link: p.large_media_url,
              link_target_blank: p.large_media_new_tab
            %}
          {% else %}
            <!-- Inline accessible placeholder for missing video -->
            <div
              class="henk-media-placeholder henk-media-placeholder--large"
              role="img"
              aria-label="No video available"
            >
              <svg width="80" height="80" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                <path d="M3 22v-20l18 10-18 10z" fill="currentColor"/>
              </svg>
              <span class="visually-hidden">No video available</span>
            </div>
          {% endif %}
        {% else %}
          {% if p.large_media_url != blank %}
            <a
              href="{{ p.large_media_url }}"
              {% if p.large_media_new_tab %}
                target="_blank" rel="noopener"
              {% endif %}
            >
          {% endif %}

          {% if p.large_image %}
            <img
              class="item__image"
              id="img1"
              src="{{ p.large_image | image_url: width: 1120, height: 1400, crop: 'center' }}"
              alt="{{ p.large_image.alt | default: 'Large Image' }}"
              loading="lazy"
              width="1120"
              height="1400"
            >
          {% else %}
            {{ 'image' | placeholder_svg_tag: 'placeholder-svg-large' }}
          {% endif %}

          {% if p.large_media_url != blank %}
            </a>
          {% endif %}
        {% endif %}
      </div>

      <!-- SMALL MEDIA -->
      <div class="henk-double-media-block__grid-item">
        {% if p.small_media_type == 'video' %}
          {% if p.small_video %}
            {% render 'henk-video',
              src: p.small_video,
              autoplay: true,
              loop: true,
              cover: true,
              link: p.small_media_url,
              link_target_blank: p.small_media_new_tab
            %}
          {% else %}
            {{ 'video' | placeholder_svg_tag: 'placeholder-svg-small' }}
          {% endif %}
        {% else %}
          {% if p.small_media_url != blank %}
            <a
              href="{{ p.small_media_url }}"
              {% if p.small_media_new_tab %}
                target="_blank" rel="noopener"
              {% endif %}
            >
          {% endif %}

          {% if p.small_image %}
            <img
              class="item__image"
              id="img2"
              src="{{ p.small_image | image_url: width: 808, height: 998, crop: 'center' }}"
              alt="{{ p.small_image.alt | default: 'Small Image' }}"
              loading="lazy"
              width="808"
              height="998"
            >
          {% else %}
            {{ 'image' | placeholder_svg_tag: 'placeholder-svg-small' }}
          {% endif %}

          {% if p.small_media_url != blank %}
            </a>
          {% endif %}
        {% endif %}
      </div>
    </div>
  </div>
</div>
